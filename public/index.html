<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yono Games Store</title>

    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome for icons -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Main Content */
        .page-title {
            font-size: 1.5em;
            text-align: center;
            margin-top: 20px;
            margin-bottom: 15px;
            color: #000;
        }

        /* Description Box */
        .description-box {
            background-color: #4CAF50;
            color: #fff;
            padding: 15px;
            border-radius: 8px;
            line-height: 1.5;
            margin-bottom: 20px;
            font-size:small;
        }

        /* Download Section */
        .download-section {
            text-align: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #000;
        }

        .download-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .btn {
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            font-weight: bold;
        }

        .btn-primary {
            background-color: #007bff;
            color: #fff;
        }

        .btn-secondary {
            background-color: #f0f2f5;
            color: #555;
        }

        .btn i {
            margin-right: 5px;
        }

        /* Game List */
        .game-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .game-item {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .game-details {
            display: flex;
            align-items: center;
        }

        .game-icon {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            margin-right: 15px;
        }

        .game-details h3 {
            margin: 0;
            font-size: 1.1em;
            color: #333;
        }

        .game-details p {
            margin: 2px 0;
            font-size: 0.9em;
            color: #777;
        }

        .download-btn {
            background-color: #28a745;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
        }

    </style>
</head>

<body>

    <!-- Header Section -->
    <header class="main-header">
        <div class="header-content">
            <div class="logo">
                <img src="img/he-lo.png" alt="Yono Games Store Logo" class="logo-icon">
                <span>YONO GAMES STORE</span>
            </div>
        </div>
    </header>

    <!-- Navigation Menu -->
    <nav class="main-nav">
        <ul>
            <li><a href="index.html" class="active"><i class="fas fa-home"></i>Home</a></li>
            <li><a href="about.html"><i class="fas fa-info-circle"></i>About</a></li>
            <li><a href="contact.html"><i class="fas fa-envelope"></i>Contact</a></li>
            <li><a href="disclimer.html"><i class="fas fa-file-alt"></i>Disclaimer</a></li>
            <li><a href="https://t.me/earning_worlld" target="_blank"><i class="fa-brands fa-telegram" style="color: #74C0FC;"></i>Join TG</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <h1 class="page-title">ALL YONO GAMES STORES</h1>

        <!-- Description Box -->
        <div class="description-box">
            <p>The NEW YONO APP brings you an exciting opportunity to earn real money daily, through a wide range of
                games. With YONO GAMES, you can enjoy thrilling games, win money, and more. Popular titles like YONO
                Rummy, YONO 777, Spin Wheel, Jalho Rummy, and IND Bingo offer non-stop fun and big rewards. Whether
                you're a casual gamer or serious about earning, YONO 24/7 has something for everyone. Download now and
                dive into the world of ALL YONO GAMES for thrilling gameplay, secure withdrawals, and non-stop
                entertainment with every spin!</p>
            <p>Please read <a href="disclimer.html">Disclaimer</a> before download and invest in the games.</p>
        </div>

        <!-- Download Section -->
        <div class="download-section">
            <h2 class="section-title">Download NEW YONO APP</h2>
            <div class="download-buttons">
                <button class="btn btn-primary" id="newGamesBtn"><i class="fas fa-star"></i> New Games</button>
                <button class="btn btn-secondary" id="otherGamesBtn"><i class="fas fa-gamepad"></i> Other Games</button>
            </div>
        </div>

        <!-- Games List Container (now dynamically populated) -->
        <div id="games-container">
            <!-- New Games List (visible by default) -->
            <div id="newGamesList" class="game-list">
                <!-- Games will be rendered here by JavaScript -->
            </div>

            <!-- Other Games List (hidden by default) -->
            <div id="otherGamesList" class="game-list" style="display: none;">
                <!-- Games will be rendered here by JavaScript -->
            </div>
        </div>
    </main>

    <!-- Fixed Telegram Button -->
    <a href="https://t.me/Earning_worlld_bot" class="telegram-btn" target="_blank">
        <i class="fab fa-telegram-plane"></i>
    </a>

    <!-- JavaScript to handle button clicks and fetch data -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const newGamesBtn = document.getElementById('newGamesBtn');
            const otherGamesBtn = document.getElementById('otherGamesBtn');
            const newGamesList = document.getElementById('newGamesList');
            const otherGamesList = document.getElementById('otherGamesList');

            const updateButtonStyles = (activeBtn, inactiveBtn) => {
                activeBtn.classList.remove('btn-secondary');
                activeBtn.classList.add('btn-primary');
                inactiveBtn.classList.remove('btn-primary');
                inactiveBtn.classList.add('btn-secondary');
            };

            const renderGames = (games, listElement) => {
                listElement.innerHTML = '';
                if (games.length === 0) {
                    listElement.innerHTML = '<p style="text-align: center; color: #777;">No games found. Please wait for update by Admin.</p>';
                    return;
                }
                games.forEach(game => {
                    const gameItem = document.createElement('div');
                    gameItem.className = 'game-item';
                    gameItem.innerHTML = `
                        <div class="game-details">
                            <img src="${game.imageUrl}" alt="${game.name} Logo" class="game-icon">
                            <div>
                                <h3>${game.name}</h3>
                                <p style="font-size: 14px; color: #00008B;"><i class="fa-solid fa-gift"></i> Sign Up Bonus ₹${game.bonus}</p>
                                <p style="font-size: 14px; color: #006400;"><i class="fa-solid fa-wallet"></i> Min. Withdraw ₹${game.withdraw}</p>
                            </div>
                        </div>
                        <a href="${game.downloadUrl}" target="_blank" class="download-btn"><i class="fa fa-download"></i> Download</a>
                    `;
                    listElement.appendChild(gameItem);
                });
            };

            const fetchGames = async () => {
                try {
                    const response = await fetch('/api/games');
                    if (!response.ok) {
                        throw new Error('Failed to fetch games');
                    }
                    const games = await response.json();

                    // Sort the games in reverse chronological order based on their Firestore ID
                    // games.sort((a, b) => b.id.localeCompare(a.id));
                    // Sort the games by latest first using createdAt timestamp
                    games.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));


                    const newGames = games.filter(g => g.type === 'new');
                    const otherGames = games.filter(g => g.type === 'other');

                    renderGames(newGames, newGamesList);
                    renderGames(otherGames, otherGamesList);
                } catch (error) {
                    console.error("Error fetching games:", error);
                    newGamesList.innerHTML = '<p style="text-align: center; color: red;">Plese wait some Error! occur from our side. We will fix it soon.</p>';
                    otherGamesList.innerHTML = '';
                }
            };

            // Set initial state
            updateButtonStyles(newGamesBtn, otherGamesBtn);

            newGamesBtn.addEventListener('click', () => {
                newGamesList.style.display = 'flex';
                otherGamesList.style.display = 'none';
                updateButtonStyles(newGamesBtn, otherGamesBtn);
            });

            otherGamesBtn.addEventListener('click', () => {
                newGamesList.style.display = 'none';
                otherGamesList.style.display = 'flex';
                updateButtonStyles(otherGamesBtn, newGamesBtn);
            });

            // Fetch and render games when the page loads
            fetchGames();
        });
    </script>
</body>

</html>
